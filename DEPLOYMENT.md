# Розгортання

Є два шляхи розгортання та запуску додатку - вручну та за допомогою makefile.

# Розгортання через makefile

Перейдіть у папку deployment/makefiles
```
cd deployment/makefiles
```

Список доступних команд:
| Command               | Description                                   |
| --------------------- | --------------------------------------------- |
| `make help`           | допомога                                      |
| `make build`          | Збілдити імейджі для фронтенду та бекенду     |
| `make build-backend`  | Збілдити імейдж для бекенду                   |
| `make build-frontend` | Збілдити імейдж для фронтенду                 |
| `make run`            | Запустити контейнери для бекенду та фронтенду |
| `make run-backend`    | Запустити контейнер для бекенду               |
| `make run-frontend`   | Запустити контейнер для фронтенду             |
| `make start`          | Запустити стопнуті контейнери                 |
| `make stop`           | Стопнути запущені контейнери                  |
| `make clean`          | Видалити контейнери та імейджі                |

Наприклад, щоб запустити контейнер для бекенду, потрібно виконати наступні команди:
```
make build-backend
make run-backend
```

Після тестування можете видалити контейнери, проте імейджі видаляться також:
```
make stop
make clean
```

# Розгортання вручну

Будувати імейджі потрібно з кореневої папки проєкту, проте потрібно вказати шлях до докерфайлу.
Наприклад, щоб запустити контейнер бекенду вручну, потрібно:
```
docker build -t p1-backend -f ./deployment/docker/backend/Dockerfile .
```
де p1-backend - тег для імейджа бекенду. Змініть за потреби.

Щоб запустити контейнер виконайте:
```
docker run -d -p 8000:8000  p1-backend:latest --name p1-backend
```

Якщо прокидування портів не змінюється(8000:8000), то API бекенду буде доступним за адресою localhost:8000 на вашій хост-машині (не тільки всередині контейнера)

Після тестування видаліть контейнери (та імейджі за потреби):
```
docker rm -f p1-backend
docker rmi p1-backend:latest
```


